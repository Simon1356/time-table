(function(e){function t(t){for(var n,s,o=t[0],r=t[1],c=t[2],p=0,f=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(f.length)f.shift()();return l.push.apply(l,c||[]),i()}function i(){for(var e,t=0;t<l.length;t++){for(var i=l[t],n=!0,o=1;o<i.length;o++){var r=i[o];0!==a[r]&&(n=!1)}n&&(l.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},a={app:0},l=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/time-table/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;l.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},"30fc":function(e,t,i){"use strict";i("f94b")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=i("5c96"),l=i.n(a),s=(i("0fae"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("MainPage",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)}),o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",[n("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:i("5b62"),fit:"fit"}}),n("div",{staticClass:"grand-title"},[e._v(" Simon工具箱时刻表管理系统 ")])],1),n("div",{staticClass:"search-box"},[n("el-input",{attrs:{placeholder:"搜索车次(仅数字部分)"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[n("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"})])],1),n("el-main",[n("div",{staticClass:"container"},[n("div",{staticClass:"head-bar"},[n("input",{attrs:{type:"file",id:"fileInput"}}),n("el-button",{attrs:{type:"primary",round:"",plain:"",size:"normal"},on:{click:e.goRead}},[e._v("读取")]),n("el-button",{attrs:{type:"warning",round:"",plain:"",size:"normal"},on:{click:e.showDetail}},[e._v("检视")]),n("el-button",{attrs:{type:"success",round:"",plain:"",size:"normal"},on:{click:e.goSave}},[e._v("保存")])],1),n("div",{staticClass:"basic-info"},[n("el-form",{ref:"basicInfo",attrs:{model:e.config,"label-width":"100px"}},[n("div",{staticStyle:{"margin-bottom":"8px","font-weight":"bold"}},[e._v("基础信息")]),n("el-form-item",{attrs:{label:"线路显示名称"}},[n("el-input",{model:{value:e.config.lineName,callback:function(t){e.$set(e.config,"lineName",t)},expression:"config.lineName"}})],1),n("el-form-item",{attrs:{label:"列表中位置"}},[n("el-input-number",{attrs:{min:0,max:10,label:"列表中位置"},model:{value:e.config.pos,callback:function(t){e.$set(e.config,"pos",t)},expression:"config.pos"}})],1),n("el-form-item",{attrs:{label:"滚动通知"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"时刻表更新于：后面的内容"},model:{value:e.config.updateDate,callback:function(t){e.$set(e.config,"updateDate",t)},expression:"config.updateDate"}})],1),n("el-form-item",{attrs:{label:"车次位数"}},[n("el-input-number",{attrs:{min:3,max:4},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1)],1)],1),n("el-dialog",{staticStyle:{"text-align":"unset"},attrs:{title:"录入车次",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.oneTrain}},[n("el-form-item",{attrs:{label:"时刻"}},[e._l(e.oneTrain.timeTags,(function(t){return n("el-tag",{key:t,staticStyle:{float:"left"},attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{float:"left"},attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",staticStyle:{float:"left"},attrs:{size:"small",icon:"el-icon-plus"},on:{click:e.showInput}},[e._v("新增时刻")]),n("div",[n("el-input",{attrs:{placeholder:"点击上方按钮 新增时刻 或在此输入多个 “时刻 时刻 时刻” 并解析"},model:{value:e.tempTimeTags,callback:function(t){e.tempTimeTags=t},expression:"tempTimeTags"}}),n("el-button",{staticStyle:{float:"right",margin:"4px"},attrs:{type:"warning",size:"small",plain:""},on:{click:function(t){e.tempTimeTags=""}}},[e._v("清空")]),n("el-button",{staticStyle:{float:"right",margin:"4px"},attrs:{type:"success",size:"small",plain:""},on:{click:e.goDecode}},[e._v("解析")])],1)],2),n("el-form-item",{attrs:{label:"经停车站"}},[n("el-checkbox-group",{model:{value:e.oneTrain.selectedStations,callback:function(t){e.$set(e.oneTrain,"selectedStations",t)},expression:"oneTrain.selectedStations"}},e._l(e.curTable,(function(e,t){return n("el-checkbox",{key:t,staticStyle:{float:"left"},attrs:{label:e.stationName,name:e.stationName}})})),1)],1),n("el-form-item",{attrs:{label:"最终结果"}},[n("div",{staticStyle:{color:"red","font-weight":"600"}},[e._v(" 请仔校对车站顺序及其对应时刻！ ")]),e._l(e.oneTrain.selectedStations,(function(t,i){return n("el-tag",{key:i,attrs:{type:"info",size:"small"}},[e._v(e._s(t+" : "+e.oneTrain.timeTags[i])+" "),n("i",{directives:[{name:"show",rawName:"v-show",value:i!=e.oneTrain.selectedStations.length-1,expression:"idx != oneTrain.selectedStations.length - 1"}],staticClass:"el-icon-caret-right"})])}))],2),n("el-form-item",{attrs:{label:"信息"}},[n("el-button",{staticStyle:{float:"right",margin:"4px"},attrs:{type:"warning",size:"small",plain:""},on:{click:function(t){e.oneTrain.type=e.oneTrain.type[0]}}},[e._v("清空剩首")]),n("el-button",{staticStyle:{float:"right",margin:"4px"},attrs:{type:"success",size:"small",plain:""},on:{click:e.generatePassInfo}},[e._v("生成经停信息")]),n("el-input",{attrs:{type:"textarea",placeholder:"Gxxxx次：经停：A站、B站、C站"},model:{value:e.oneTrain.type,callback:function(t){e.$set(e.oneTrain,"type",t)},expression:"oneTrain.type"}})],1),n("el-form-item",{attrs:{label:"标签"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-evenly","align-items":"center"}},[n("span",{staticClass:"switch-label"},[e._v("蓝标签")]),n("el-switch",{attrs:{"active-color":"#6dc8ef","inactive-color":"#eee"},model:{value:e.oneTrain.isFull,callback:function(t){e.$set(e.oneTrain,"isFull",t)},expression:"oneTrain.isFull"}}),n("span",{staticClass:"switch-label"},[e._v("橙标签")]),n("el-switch",{attrs:{"active-color":"orange","inactive-color":"#eee"},model:{value:e.oneTrain.isSub,callback:function(t){e.$set(e.oneTrain,"isSub",t)},expression:"oneTrain.isSub"}})],1)])],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmOneTrain}},[e._v("确 定")])],1)],1),e._l([e.config.tableShang,e.config.tableXia],(function(t,i){return n("div",{key:i},[n("div",{staticClass:"direction-title-bar"},[n("el-button",{attrs:{type:"info",size:"small",plain:"",icon:"el-icon-edit"},on:{click:function(i){return e.openDialog(t)}}},[e._v("录入车次")]),n("el-tag",{attrs:{color:"#133977"}},[e._v(e._s(e.title[i]))])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t}},[n("el-table-column",{attrs:{"header-align":"center",align:"center",label:"移动",width:"80"},scopedSlots:e._u([{key:"default",fn:function(i){return[n("div",{staticClass:"move-part"},[n("el-button",{attrs:{disabled:0==i.$index,type:"info",plain:"",size:"mini",icon:"el-icon-caret-top"},on:{click:function(n){return e.moveUp(t,i.$index)}}}),n("el-button",{attrs:{disabled:i.$index==t.length-1,type:"info",plain:"",size:"mini",icon:"el-icon-caret-bottom"},on:{click:function(n){return e.moveDown(t,i.$index)}}})],1)]}}],null,!0)}),n("el-table-column",{attrs:{align:"center",label:"车站",width:"180"},scopedSlots:e._u([{key:"default",fn:function(i){return[n("el-button",{attrs:{type:"danger",plain:"",round:"",size:"small",icon:"el-icon-delete"},on:{click:function(n){return e.deleteStation(t,i.$index)}}}),n("el-input",{staticClass:"station-name",attrs:{size:"small",placeholder:"车站名"},model:{value:i.row.stationName,callback:function(t){e.$set(i.row,"stationName",t)},expression:"scope.row.stationName"}}),n("div",{staticClass:"station-name-switch"},[n("span",{staticClass:"switch-label"},[e._v("蓝标签")]),n("el-switch",{attrs:{"active-color":"#6dc8ef","inactive-color":"#eee"},model:{value:i.row.full,callback:function(t){e.$set(i.row,"full",t)},expression:"scope.row.full"}})],1),n("div",{staticClass:"station-name-switch"},[n("span",{staticClass:"switch-label"},[e._v("橙标签")]),n("el-switch",{attrs:{"active-color":"orange","inactive-color":"#eee"},model:{value:i.row.sub,callback:function(t){e.$set(i.row,"sub",t)},expression:"scope.row.sub"}})],1)]}}],null,!0)}),n("el-table-column",{attrs:{"header-align":"left",align:"left",label:"时刻"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.depart,(function(i,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:i.type.substring(1,e.num+1).includes(e.searchName)||""==e.searchName,expression:"\n                    item.type.substring(1, num + 1).includes(searchName) ||\n                      searchName == ''\n                  "}],key:a,staticClass:"time"},[n("div",{staticStyle:{display:"flex","justify-content":"space-evenly","align-items":"center"}},[n("el-input",{attrs:{placeholder:"时刻"},model:{value:i.time,callback:function(t){e.$set(i,"time",t)},expression:"item.time"}}),n("span",{staticClass:"switch-label"},[e._v("蓝")]),n("el-switch",{attrs:{"active-color":"#6dc8ef","inactive-color":"#eee"},model:{value:i.isFull,callback:function(t){e.$set(i,"isFull",t)},expression:"item.isFull"}}),n("span",{staticClass:"switch-label"},[e._v("橙")]),n("el-switch",{attrs:{"active-color":"orange","inactive-color":"#eee"},model:{value:i.isSub,callback:function(t){e.$set(i,"isSub",t)},expression:"item.isSub"}}),n("el-tag",{attrs:{color:"#"+i.type.substring(1,4)+i.type.substring(3,4)+i.type.substring(2,3)+i.type.substring(1,2)}},[e._v(e._s(i.type.substring(0,e.num+1)))])],1),n("el-input",{staticStyle:{height:"33px"},attrs:{type:"textarea",placeholder:"车次详情"},model:{value:i.type,callback:function(t){e.$set(i,"type",t)},expression:"item.type"}}),n("div",{staticClass:"btns"},[n("el-button",{attrs:{disabled:0==a,icon:"el-icon-caret-left",type:"info",size:"mini",plain:"",round:""},on:{click:function(i){return e.moveLeft(t.row.depart,a)}}}),n("el-button",{attrs:{type:"danger",size:"mini",plain:"",round:""},on:{click:function(i){return e.remove(t.row.depart,a)}}},[e._v("删除")]),n("el-button",{attrs:{type:"primary",size:"mini",round:"",plain:""},on:{click:function(i){return e.add(t.row.depart,a)}}},[e._v("向右复制")]),n("el-button",{attrs:{disabled:a==t.row.depart.length-1,icon:"el-icon-caret-right",type:"info",size:"mini",plain:"",round:""},on:{click:function(i){return e.moveRight(t.row.depart,a)}}})],1)],1)})),n("el-button",{directives:[{name:"show",rawName:"v-show",value:""==e.searchName,expression:"searchName == ''"}],staticStyle:{"vertical-align":"super"},attrs:{type:"primary",icon:"el-icon-plus",circle:"",plain:""},on:{click:function(i){return e.addBlank(t.row.depart)}}})]}}],null,!0)})],1),n("el-button",{staticClass:"add-staation-btn",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(i){return e.addStation(t)}}},[e._v("添加车站")])],1)})),n("div",{class:e.visualPanelShow?"visual visual-open":"visual visual-close"},[n("el-button",{staticClass:"expand-btn",attrs:{type:e.visualPanelShow?"danger":"warning",plain:"",icon:e.visualPanelShow?"el-icon-close":"el-icon-magic-stick"},on:{click:function(t){e.visualPanelShow=!e.visualPanelShow}}}),e.visualPanelShow?n("el-input",{attrs:{placeholder:"请输入想要查询的车次"},model:{value:e.searchVisual,callback:function(t){e.searchVisual=t},expression:"searchVisual"}}):e._e(),e.visualPanelShow?n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.checkVisual}}):e._e(),e.visualPanelShow?n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.visualTable}},[n("el-table-column",{attrs:{prop:"name",label:"车次",width:"width"}}),""!=e.searchVisual?n("el-table-column",{attrs:{"header-align":"center",align:"center",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(i){return e.edit(t.row)}}},[e._v("编辑")])]}}],null,!1,213682523)}):e._e(),e._l(e.curVisualTable,(function(t,i){return n("el-table-column",{key:i,attrs:{"header-align":"center",align:"center",prop:t,label:t},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row[t]?n("i",{staticClass:"el-icon-success"}):e._e(),i.row[t]?e._e():n("i",{staticClass:"el-icon-minus"})]}}],null,!0)})}))],2):e._e()],1),n("div",{staticClass:"copyright"},[n("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:i("fcaa"),fit:"fit"}}),n("div",[e._v(" Simon工具箱时刻表管理系统，由Up主Simon1356开发于2021年1月21日。 ")])],1)],2)])],1)],1)},c=[],u=(i("4de4"),i("c740"),i("4160"),i("caad"),i("c975"),i("a15b"),i("d81d"),i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("1276"),i("159b"),i("ddb0"),i("2b3d"),{name:"MainPage",data:function(){return{visualPanelShow:!0,tempTimeTags:"",curVisualTable:[],visualTable:[{name:"",timeTags:[],isSub:!1,isFull:!1,type:""}],searchVisual:"",curTable:[],inputVisible:!1,inputValue:"",dialogVisible:!1,oneTrain:{isFull:!1,isSub:!1,type:"",timeTags:[],selectedStations:[]},num:3,searchName:"",config:{lineName:"",pos:"",tableShang:[],tableXia:[],updateDate:""},title:["上行时刻表","下行时刻表"]}},props:{msg:String},methods:{edit:function(e){console.log("scope内容:",e);var t=this.curVisualTable.filter((function(t){return 1==e[t]}));console.log("selected stations:",t),this.oneTrain.type=e.type,this.oneTrain.selectedStations=t,this.oneTrain.timeTags=e.timeTags,this.oneTrain.isSub=e.isSub,this.oneTrain.isFull=e.isFull,this.dialogVisible=!0},generatePassInfo:function(){for(var e=this.oneTrain.type+"：经停：",t=0;t<this.oneTrain.selectedStations.length;t++){var i=this.oneTrain.selectedStations[t];t==this.oneTrain.selectedStations.length-1?e+=i+"。":e+=i+"、"}this.oneTrain.type=e},goDecode:function(){this.oneTrain.timeTags=this.tempTimeTags.split(" ")},checkVisual:function(){var e=this;this.visualTable[0].name=this.searchVisual,this.curVisualTable=[],this.config.tableShang.forEach((function(t){var i=t.depart.filter((function(t){return t.type.includes(e.searchVisual)}));i.length>0&&(e.curVisualTable=e.config.tableShang,e.curTable=e.config.tableShang)})),this.config.tableXia.forEach((function(t){var i=t.depart.filter((function(t){return t.type.includes(e.searchVisual)}));i.length>0&&(e.curVisualTable=e.config.tableXia,e.curTable=e.config.tableXia)})),console.log("table is:",this.curVisualTable),this.visualTable[0].timeTags=[],this.curVisualTable.forEach((function(t){var i=t.depart.filter((function(t){return t.type.includes(e.searchVisual)}));console.log("filter res in depart of each station:",i),i.length>0?(e.visualTable[0][t.stationName]=!0,e.visualTable[0].timeTags.push(i[0].time),e.visualTable[0].type=i[0].type,e.visualTable[0].isSub=i[0].isSub,e.visualTable[0].isFull=i[0].isFull):e.visualTable[0][t.stationName]=!1})),this.curVisualTable=this.curVisualTable.map((function(e){return e.stationName})),console.log("visual table:",this.visualTable)},openDialog:function(e){var t=this;this.curTable=e,this.curTable.length<1?alert("请先添加车站或者导入"):this.$nextTick((function(){t.dialogVisible=!0}))},confirmOneTrain:function(){var e=this;console.log("oneTrain:",this.oneTrain),this.oneTrain.selectedStations.length==this.oneTrain.timeTags.length?(this.curTable.forEach((function(t){var i=t.stationName,n=t.depart.findIndex((function(t){return t.type.substring(0,e.num+1)==e.oneTrain.type.substring(0,e.num+1)}));n>-1&&t.depart.splice(n,1);var a=e.oneTrain.selectedStations.findIndex((function(e){return e==i}));if(a>-1){var l={isFull:e.oneTrain.isFull,isSub:e.oneTrain.isSub,time:e.oneTrain.timeTags[a],type:e.oneTrain.type};t.depart.splice(t.depart.length,0,l)}})),this.$message({message:"新增车次 ".concat(this.oneTrain.type.substring(0,this.num+1)," 成功！"),type:"success"})):alert("选择的站点数量与时刻数量长度不一致")},handleClose:function(e){this.oneTrain.timeTags.splice(this.oneTrain.timeTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.oneTrain.timeTags.push(e),this.inputVisible=!1,this.inputValue=""},moveUp:function(e,t){var i=e[t-1];e.splice(t-1,1,e[t]),e.splice(t,1,i)},moveDown:function(e,t){var i=e[t+1];e.splice(t+1,1,e[t]),e.splice(t,1,i)},deleteStation:function(e,t){e.splice(t,1)},addStation:function(e){var t={depart:[],stationName:""};e.splice(e.length,0,t)},moveLeft:function(e,t){var i=e[t-1];e.splice(t-1,1,e[t]),e.splice(t,1,i)},moveRight:function(e,t){var i=e[t+1];e.splice(t+1,1,e[t]),e.splice(t,1,i)},addBlank:function(e){var t={isFull:!1,isSub:!1,time:"",type:""};e.splice(e.length,0,t)},goSave:function(){var e=JSON.stringify(this.config);console.log(this.config);var t=new Blob([e],{type:"text/plain"}),i=document.createEvent("MouseEvents"),n=document.createElement("a");n.download=this.config.lineName+"配置文件.json",n.href=window.URL.createObjectURL(t),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),i.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},remove:function(e,t){e.splice(t,1)},add:function(e,t){e.splice(t,0,JSON.parse(JSON.stringify(e[t])))},showDetail:function(){console.log("配置文件为:",this.config)},goRead:function(){var e=document.getElementById("fileInput"),t=new FileReader,i=this;t.onload=function(){var e=JSON.parse(t.result);console.log(e),i.config=e,i.$forceUpdate()},t.readAsText(e.files[0])}}}),p=u,f=(i("30fc"),i("2877")),d=Object(f["a"])(p,r,c,!1,null,null,null),m=d.exports,b={name:"App",components:{MainPage:m}},h=b,v=(i("034f"),Object(f["a"])(h,s,o,!1,null,null,null)),g=v.exports;n["default"].config.productionTip=!1,n["default"].use(l.a),new n["default"]({render:function(e){return e(g)}}).$mount("#app")},"5b62":function(e,t,i){e.exports=i.p+"img/logo.e8940fbe.png"},"85ec":function(e,t,i){},f94b:function(e,t,i){},fcaa:function(e,t,i){e.exports=i.p+"img/logo1356.0eeb894c.png"}});
//# sourceMappingURL=app.c83b61e3.js.map